<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>玉入れゲーム</title>
<style>
  body { text-align: center; font-family: Arial, sans-serif; }
  #gameArea { position: relative; width: 800px; height: 600px; margin: 0 auto; background-color: #f0f0f0; overflow: hidden; }
  #basket { position: absolute; top: 50px; left: calc(50% - 50px); width: 100px; height: 100px; background-color: brown; border-radius: 50%; }
  .ball { position: absolute; width: 30px; height: 30px; background-color: red; border-radius: 50%; cursor: pointer; }
  #score { font-size: 24px; margin-top: 20px; }
  #time { font-size: 24px; margin-top: 10px; }
  #startButton { padding: 10px 20px; font-size: 20px; margin-top: 20px; }
</style>
</head>
<body>
<h1>玉入れゲーム</h1>
<div id="gameArea">
  <div id="basket"></div>
</div>
<div id="score">スコア: 0</div>
<div id="time">残り時間: 30秒</div>
<button id="startButton">ゲーム開始</button>

<script>
  let score = 0;
  let timeLeft = 30;
  let gameInterval;
  const gameArea = document.getElementById('gameArea');
  const scoreDisplay = document.getElementById('score');
  const timeDisplay = document.getElementById('time');
  const startButton = document.getElementById('startButton');
  const basket = document.getElementById('basket');

  startButton.addEventListener('click', startGame);

  function startGame() {
    startButton.disabled = true;
    score = 0;
    timeLeft = 30;
    scoreDisplay.textContent = 'スコア: ' + score;
    timeDisplay.textContent = '残り時間: ' + timeLeft + '秒';

    gameInterval = setInterval(() => {
      timeLeft--;
      timeDisplay.textContent = '残り時間: ' + timeLeft + '秒';
      if (timeLeft <= 0) {
        clearInterval(gameInterval);
        endGame();
      }
    }, 1000);

    generateBalls();
  }

  function generateBalls() {
    for (let i = 0; i < 20; i++) {
      createBall();
    }
  }

  function createBall() {
    const ball = document.createElement('div');
    ball.classList.add('ball');
    ball.style.left = Math.random() * (gameArea.clientWidth - 30) + 'px';
    ball.style.top = Math.random() * (gameArea.clientHeight - 30) + 'px';
    ball.addEventListener('click', throwBall);
    gameArea.appendChild(ball);
  }

  function throwBall(event) {
    const ball = event.target;
    const ballRect = ball.getBoundingClientRect();
    const basketRect = basket.getBoundingClientRect();

    // アニメーションでボールをバスケットに移動
    const deltaX = basketRect.left + basketRect.width / 2 - (ballRect.left + ballRect.width / 2);
    const deltaY = basketRect.top + basketRect.height / 2 - (ballRect.top + ballRect.height / 2);

    ball.style.transition = 'transform 0.5s';
    ball.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
    ball.style.pointerEvents = 'none';

    setTimeout(() => {
      ball.remove();
      score++;
      scoreDisplay.textContent = 'スコア: ' + score;
      if (document.querySelectorAll('.ball').length < 20 && timeLeft > 0) {
        createBall();
      }
    }, 500);
  }

  function endGame() {
    alert('ゲーム終了！あなたのスコアは ' + score + ' 点です！');
    startButton.disabled = false;
    // ゲームエリアのボールをすべて削除
    const balls = document.querySelectorAll('.ball');
    balls.forEach(ball => ball.remove());
  }
</script>
</body>
</html>
