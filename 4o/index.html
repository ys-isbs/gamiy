<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HunterxHunter's 軍儀 (Simplified)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #gameBoard {
            display: grid;
            grid-template-columns: repeat(6, 60px);
            grid-template-rows: repeat(6, 60px);
            gap: 2px;
            background-color: #333;
        }
        .cell {
            width: 60px;
            height: 60px;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
        }
        .player1 {
            background-color: #ff6347;
            color: #fff;
        }
        .player2 {
            background-color: #4682b4;
            color: #fff;
        }
        #status {
            margin-top: 20px;
            text-align: center;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div>
    <div id="gameBoard"></div>
    <div id="status">
        <p id="turnIndicator">Player 1's Turn</p>
        <button onclick="resetGame()">Restart Game</button>
    </div>
</div>

<script>
    // Game setup
    const boardSize = 6;
    const gameBoard = document.getElementById('gameBoard');
    const turnIndicator = document.getElementById('turnIndicator');
    let currentPlayer = 1;
    let selectedPiece = null;
    let board = [];

    // Initialize the board with pieces for both players
    function initBoard() {
        board = Array(boardSize).fill(null).map(() => Array(boardSize).fill(null));
        
        // Set Player 1's pieces (King and two soldiers)
        board[0][0] = { player: 1, type: 'K' }; // King
        board[0][1] = { player: 1, type: 'S' }; // Soldier
        board[0][2] = { player: 1, type: 'S' }; // Soldier

        // Set Player 2's pieces (King and two soldiers)
        board[5][5] = { player: 2, type: 'K' }; // King
        board[5][4] = { player: 2, type: 'S' }; // Soldier
        board[5][3] = { player: 2, type: 'S' }; // Soldier
    }

    // Create the board UI
    function createBoard() {
        gameBoard.innerHTML = '';
        for (let row = 0; row < boardSize; row++) {
            for (let col = 0; col < boardSize; col++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.dataset.row = row;
                cell.dataset.col = col;
                if (board[row][col]) {
                    const piece = board[row][col];
                    cell.textContent = piece.type;
                    cell.classList.add(`player${piece.player}`);
                }
                cell.addEventListener('click', () => handleCellClick(row, col));
                gameBoard.appendChild(cell);
            }
        }
    }

    // Handle clicks on cells
    function handleCellClick(row, col) {
        const selectedCell = board[row][col];

        // If selecting own piece
        if (selectedCell && selectedCell.player === currentPlayer) {
            selectedPiece = { row, col };
            highlightValidMoves(row, col);
        } 
        // If moving to an empty cell or capturing opponent's piece
        else if (selectedPiece) {
            const validMove = isValidMove(selectedPiece.row, selectedPiece.col, row, col);
            if (validMove) {
                movePiece(selectedPiece.row, selectedPiece.col, row, col);
                checkForWinner();
                switchTurn();
                selectedPiece = null;
            }
        }
    }

    // Highlight valid moves for the selected piece
    function highlightValidMoves(row, col) {
        // Clear previous highlights
        const cells = document.querySelectorAll('.cell');
        cells.forEach(cell => cell.style.border = '');

        // Highlight adjacent cells
        const moves = getValidMoves(row, col);
        moves.forEach(([r, c]) => {
            const cell = document.querySelector(`[data-row='${r}'][data-col='${c}']`);
            if (cell) {
                cell.style.border = '2px solid yellow';
            }
        });
    }

    // Get valid moves for a piece
    function getValidMoves(row, col) {
        const moves = [];
        const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]]; // Up, Down, Left, Right
        directions.forEach(([dr, dc]) => {
            const newRow = row + dr;
            const newCol = col + dc;
            if (newRow >= 0 && newRow < boardSize && newCol >= 0 && newCol < boardSize) {
                if (!board[newRow][newCol] || board[newRow][newCol].player !== currentPlayer) {
                    moves.push([newRow, newCol]);
                }
            }
        });
        return moves;
    }

    // Check if a move is valid
    function isValidMove(fromRow, fromCol, toRow, toCol) {
        const validMoves = getValidMoves(fromRow, fromCol);
        return validMoves.some(([r, c]) => r === toRow && c === toCol);
    }

    // Move the piece on the board
    function movePiece(fromRow, fromCol, toRow, toCol) {
        const piece = board[fromRow][fromCol];
        board[fromRow][fromCol] = null;
        board[toRow][toCol] = piece;
        createBoard();
    }

    // Switch turns between players
    function switchTurn() {
        currentPlayer = currentPlayer === 1 ? 2 : 1;
        turnIndicator.textContent = `Player ${currentPlayer}'s Turn`;
    }

    // Check if there's a winner
    function checkForWinner() {
        const kings = board.flat().filter(piece => piece && piece.type === 'K');
        if (kings.length < 2) {
            alert(`Player ${currentPlayer} wins!`);
            resetGame();
        }
    }

    // Reset the game
    function resetGame() {
        currentPlayer = 1;
        initBoard();
        createBoard();
        turnIndicator.textContent = "Player 1's Turn";
    }

    // Start the game
    initBoard();
    createBoard();

</script>

</body>
</html>
